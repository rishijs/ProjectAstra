[gd_scene load_steps=11 format=3 uid="uid://j5bi0t7faf7i"]

[ext_resource type="Script" path="res://scenes/segments/combat_arenas/combat_arena.gd" id="1_rvjsu"]
[ext_resource type="PackedScene" uid="uid://b402k2bhdes07" path="res://scenes/enemies/spawner.tscn" id="2_e4jgt"]
[ext_resource type="FontFile" uid="uid://dex6qd5t25rm3" path="res://themes/fonts/Kode_Mono/KodeMono-VariableFont_wght.ttf" id="3_h6c40"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6cs6w"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_1p48k"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_a6c52"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_wl1ib"]
size = Vector3(29.475, 33.3887, 3.86438)

[sub_resource type="BoxShape3D" id="BoxShape3D_db3jd"]
size = Vector3(30.1664, 28.2791, 2.43411)

[sub_resource type="BoxMesh" id="BoxMesh_d0jtd"]

[sub_resource type="BoxShape3D" id="BoxShape3D_yx3tu"]
size = Vector3(23.1252, 27.7267, 53.7748)

[node name="CombatArena" type="Node3D" node_paths=PackedStringArray("connection_end", "doorE", "doorC", "doorL", "doorR", "spawners", "timer_node", "up", "left", "down", "right")]
script = ExtResource("1_rvjsu")
connection_end = [NodePath("connection2"), NodePath("connection3"), NodePath("connection4")]
doorE = NodePath("DoorE")
doorC = NodePath("DoorC")
doorL = NodePath("DoorL")
doorR = NodePath("DoorR")
spawners = [NodePath("Spawner"), NodePath("Spawner2")]
timer_node = NodePath("Lifetime")
time_multiplier = 2.0
up = NodePath("UpLoc")
left = NodePath("LeftLoc")
down = NodePath("DownLoc")
right = NodePath("RightLoc")

[node name="enlarge" type="Node3D" parent="."]
transform = Transform3D(1.5, 0, 0, 0, 1, 0, 0, 0, 1.5, 0, 0, 0)

[node name="Bot" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(79.5146, 0, 0, 0, 1, 0, 0, 0, 77.9376, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Bot"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Bot/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Top" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(79.5146, 0, 0, 0, 1, 0, 0, 0, 77.9376, 0, 27.7188, 0)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Top"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Top/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side4" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(-1.35938e-06, -1, 1.43874e-06, 0, -4.37114e-08, -32.9146, 31.099, -4.37114e-08, 6.28895e-14, -40.1222, 12.3555, 23.5112)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side4/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side5" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(-1.35938e-06, -1, 1.43874e-06, 0, -4.37114e-08, -32.9146, 31.099, -4.37114e-08, 6.28895e-14, -40.1222, 12.3555, -23.9669)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side5"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side5/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side8" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(31.099, 0, 0, 0, -4.37114e-08, -32.9146, 0, 1, -1.43874e-06, -26.3279, 12.3555, 39.2147)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side8"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side8/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side9" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(31.099, 0, 0, 0, -4.37114e-08, -32.9146, 0, 1, -1.43874e-06, 23.4651, 12.3555, 39.2147)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side9"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side9/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side10" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(31.099, 0, 0, 0, -4.37114e-08, -32.9146, 0, 1, -1.43874e-06, -26.3279, 12.3555, -38.6311)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side10"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side10/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side11" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(31.099, 0, 0, 0, -4.37114e-08, -32.9146, 0, 1, -1.43874e-06, 23.4651, 12.3555, -38.6311)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side11"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side11/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side6" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(-1.35938e-06, -1, 1.43874e-06, 0, -4.37114e-08, -32.9146, 31.099, -4.37114e-08, 6.28895e-14, 39.1577, 12.3555, 23.5112)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side6"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side6/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="Side7" type="MeshInstance3D" parent="enlarge"]
transform = Transform3D(-1.35938e-06, -1, 1.43874e-06, 0, -4.37114e-08, -32.9146, 31.099, -4.37114e-08, 6.28895e-14, 39.1577, 12.3555, -23.9669)
material_override = SubResource("StandardMaterial3D_6cs6w")
mesh = SubResource("BoxMesh_1p48k")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="enlarge/Side7"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="enlarge/Side7/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_a6c52")

[node name="connection2" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -56.838)

[node name="connection3" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -57.762, 0, -1.37639)

[node name="connection4" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 56.6177, 0, 0.626812)

[node name="SegmentEntry" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 57.9872)

[node name="D" type="CollisionShape3D" parent="SegmentEntry"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.29916, 12.3409, -2.52106)
shape = SubResource("BoxShape3D_wl1ib")

[node name="U" type="CollisionShape3D" parent="SegmentEntry"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.29916, 12.3409, -115.573)
shape = SubResource("BoxShape3D_wl1ib")

[node name="L" type="CollisionShape3D" parent="SegmentEntry"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -59.807, 12.3409, -58.6466)
shape = SubResource("BoxShape3D_wl1ib")

[node name="R" type="CollisionShape3D" parent="SegmentEntry"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 59.1782, 12.3409, -58.6466)
shape = SubResource("BoxShape3D_wl1ib")

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.33324, 0)
light_energy = 5.0
omni_range = 100.0

[node name="Spawner" parent="." node_paths=PackedStringArray("spawn_points") instance=ExtResource("2_e4jgt")]
spawn_points = [NodePath("Marker3D"), NodePath("Marker3D2"), NodePath("Marker3D3"), NodePath("Marker3D4"), NodePath("Marker3D5"), NodePath("Marker3D6"), NodePath("Marker3D7"), NodePath("Marker3D8"), NodePath("Marker3D9"), NodePath("Marker3D10")]
spawn_chance = 0.75

[node name="Marker3D" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -38.7929, 1.62255, -26.5873)

[node name="Marker3D2" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.0659, 1.62255, 5.52634)

[node name="Marker3D3" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27.9013, 1.62255, -5.0089)

[node name="Marker3D4" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22.6071, 1.62255, -21.4456)

[node name="Marker3D5" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 23.644, 1.62255, 20.8322)

[node name="Marker3D6" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.0303, 1.62255, 27.3008)

[node name="Marker3D7" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16.5373, 1.62255, 34.0459)

[node name="Marker3D8" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -38.2817, 1.62255, 27.6406)

[node name="Marker3D9" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -46.2924, 1.62255, 20.5235)

[node name="Marker3D10" type="Marker3D" parent="Spawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -45.3983, 1.62255, -4.55451)

[node name="Spawner2" parent="." node_paths=PackedStringArray("spawn_points") instance=ExtResource("2_e4jgt")]
spawn_points = [NodePath("Marker3D"), NodePath("Marker3D2"), NodePath("Marker3D3"), NodePath("Marker3D4"), NodePath("Marker3D5"), NodePath("Marker3D6"), NodePath("Marker3D7"), NodePath("Marker3D8"), NodePath("Marker3D9"), NodePath("Marker3D10")]
type = 0
spawn_chance = 0.75

[node name="Marker3D" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25.9708, 1.82296, -11.3318)

[node name="Marker3D2" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.69317, 1.82296, -32.7846)

[node name="Marker3D3" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21.5438, 1.82296, -25.3078)

[node name="Marker3D4" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.69317, 1.82296, 30.7914)

[node name="Marker3D5" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.0402, 1.82296, 8.47052)

[node name="Marker3D6" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21.1054, 1.82296, 15.814)

[node name="Marker3D7" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.09757, 1.82296, 15.814)

[node name="Marker3D8" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.92875, 1.82296, 21.5316)

[node name="Marker3D9" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.92875, 1.82296, 39.418)

[node name="Marker3D10" type="Marker3D" parent="Spawner2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.92875, 1.82296, 4.35342)

[node name="UpLoc" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -60)

[node name="LeftLoc" type="Marker3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -60, 0, 0)

[node name="DownLoc" type="Marker3D" parent="."]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0, 60)

[node name="RightLoc" type="Marker3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 60, 0, 0)

[node name="DoorE" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 59.3929)
visible = false

[node name="EntryDoorCol" type="CollisionShape3D" parent="DoorE"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.87241, 13.6396, -0.355625)
shape = SubResource("BoxShape3D_db3jd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="DoorE"]
transform = Transform3D(29.2032, 0, 0, 0, 29.9668, 0, 0, 0, 1, -2.37957, 12.4889, 0)
mesh = SubResource("BoxMesh_d0jtd")

[node name="DoorC" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -57.7437)

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorC"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.87241, 13.6396, 0.0493889)
shape = SubResource("BoxShape3D_db3jd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="DoorC"]
transform = Transform3D(29.2032, 0, 0, 0, 29.9668, 0, 0, 0, 1, -2.37957, 12.4889, 0)
mesh = SubResource("BoxMesh_d0jtd")

[node name="SegmentDoorC" type="Area3D" parent="DoorC"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 57.7437)

[node name="CollisionShape3D3" type="CollisionShape3D" parent="DoorC/SegmentDoorC"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -1.3492, 13.3633, -46.0687)
shape = SubResource("BoxShape3D_yx3tu")

[node name="CL" type="Label3D" parent="DoorC/SegmentDoorC"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.86576, -53.6836)
visible = false
modulate = Color(1, 0.482353, 0.501961, 1)
text = "KEEP DIFFICULTY"
font = ExtResource("3_h6c40")
font_size = 500

[node name="DoorL" type="StaticBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -59.9173, 0, -3.15121)

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.87241, 13.6396, 0.0493889)
shape = SubResource("BoxShape3D_db3jd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="DoorL"]
transform = Transform3D(29.2032, 0, 0, 0, 29.9668, 0, 0, 0, 1, -2.37957, 12.4889, 0)
mesh = SubResource("BoxMesh_d0jtd")

[node name="SegmentDoorL" type="Area3D" parent="DoorL"]
unique_name_in_owner = true
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -3.15121, 0, 59.9173)

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorL/SegmentDoorL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -48.3133, 13.3633, -0.434509)
shape = SubResource("BoxShape3D_yx3tu")

[node name="LL" type="Label3D" parent="DoorL/SegmentDoorL"]
unique_name_in_owner = true
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -53.6933, 1.80772, 0)
visible = false
modulate = Color(1, 0.482353, 0.501961, 1)
text = "DIFFICULTY REDUCTION"
font = ExtResource("3_h6c40")
font_size = 500

[node name="DoorR" type="StaticBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 59.0992, 0, -3.15121)

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorR"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.87241, 13.6396, 0.0493889)
shape = SubResource("BoxShape3D_db3jd")

[node name="MeshInstance3D" type="MeshInstance3D" parent="DoorR"]
transform = Transform3D(29.2032, 0, 0, 0, 29.9668, 0, 0, 0, 1, -2.37957, 12.4889, 0)
mesh = SubResource("BoxMesh_d0jtd")

[node name="SegmentDoorR" type="Area3D" parent="DoorR"]
unique_name_in_owner = true
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -3.1512, 0, -59.0992)

[node name="CollisionShape3D2" type="CollisionShape3D" parent="DoorR/SegmentDoorR"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 49.4697, 13.3633, 0.203732)
shape = SubResource("BoxShape3D_yx3tu")

[node name="RL" type="Label3D" parent="DoorR/SegmentDoorR"]
unique_name_in_owner = true
transform = Transform3D(-0.0420674, 0, -0.999115, 0, 1, 0, 0.999115, 0, -0.0420674, 55.9564, 1.58905, 0)
visible = false
modulate = Color(1, 0.482353, 0.501961, 1)
text = "DIFFICULTY INCREASE"
font = ExtResource("3_h6c40")
font_size = 500

[node name="Lifetime" type="Timer" parent="."]

[connection signal="body_entered" from="SegmentEntry" to="." method="_on_segment_entry_body_entered"]
[connection signal="body_entered" from="DoorC/SegmentDoorC" to="." method="_on_segment_door_c_body_entered"]
[connection signal="body_entered" from="DoorL/SegmentDoorL" to="." method="_on_segment_door_l_body_entered"]
[connection signal="body_entered" from="DoorR/SegmentDoorR" to="." method="_on_segment_door_r_body_entered"]
[connection signal="timeout" from="Lifetime" to="." method="_on_lifetime_timeout"]
